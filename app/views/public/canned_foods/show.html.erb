<div class="container">
  <div class="row offset-1 my-5">
    <h2 class="px-3 text-center bg-info">缶詰詳細</h2>
  </div>

  <div class="row justify-content-center">
    <div class="col-3 d-flex flex-column align-items-center justify-content-center">
      <div>
        <%= image_tag @canned_food.get_image(200,100), class: "image" %>
      </div>
      <div>
        缶詰名： <%= @canned_food.canned_name %>
      </div>
      <div>
        <% @tags.each do |tag| %>
          タグ： <%= tag.name %>
        <% end %>
      </div>
    </div>

    <div class="col-2">
      <div class="detail-review">賞味期限</div>
      <%= render "public/reviews/average_rate.html.erb", canned_food: @canned_food, ave: @expiry_date_avg, type: 'expiry_date' %>
    </div>

    <div class="col-2">
      <div class="detail-review">おいしさ</div>
      <%= render "public/reviews/average_rate.html.erb", canned_food: @canned_food, ave: @taste_avg, type: 'taste' %>
    </div>

    <div class="col-2">
      <div class="detail-review">おつまみ</div>
      <%= render "public/reviews/average_rate.html.erb", canned_food: @canned_food, ave: @snack_avg, type: 'snack' %>
    </div>

    <div class="col-2">
      <div class="detail-review">アウトドア</div>
      <%= render "public/reviews/average_rate.html.erb", canned_food: @canned_food, ave: @outdoor_avg, type: 'outdoor' %>
    </div>
  </div>

  <div class="row my-5 justify-content-center">
    <div class="col-6 border border-primary">
      <%=safe_join(@canned_food.description.split("\n"),tag(:br))%>
    </div>
  </div>

  <%= render "public/reviews/rating.html.erb", review: @review %>
  
  <div class="star-group">
  <div class="detail-review">乗り心地</div>
  <div class="detail-value", id="star-comf-<%= @member_review %>"></div> <%# id要素の書き方がポイント %>
  
</div>

</div>

<script>
  $('#star-comf-<%= @member_review %>').raty({      //.idでどの評価であるかを取得
    size: 38,
    starOff:  '<%= asset_path('star-off.png') %>',
    starOn : '<%= asset_path('star-on.png') %>',
    starHalf: '<%= asset_path('star-half.png') %>',
    half: true,
    readOnly: true,                             //readOnlyオプションで読み込み専用とする。編集できない。
    score: <%= @member_review.comfort %>,              //scoreオプションで評価内容を取得
  });
</script>