<div class="container">
  <div class="row my-5">
    <h2 class="px-3 text-center">レビュー詳細</h2>
  </div>
  
  <div class="row my-5 justify-content-center">
    <div class="col-3 text-center">
      <%= link_to admin_canned_food_path(@canned_food.id) do %>
        <div>
          <%= image_tag @canned_food.get_image(200,100), class: "image" %>
        </div>
        <div>
          缶詰名： <%= @canned_food.canned_name %>
        </div>
      <% end %>
      <div>
        <% @tags.each do |tag| %>
          タグ： <%= tag.name %>
        <% end %>
      </div>
    </div>
    <div class="col-6 border border-primary text-break overflow-auto" style="height: 200px">
      <%=safe_join(@canned_food.description.split("\n"),tag(:br))%>
    </div>
  </div>
  
  <div class="row my-5 text-center">
    <div class="col-12">
      <h5 class="row justify-content-center">
        <%= link_to admin_member_path(@review.member) do %>
          <%= @review.member.nickname %>さんの評価
         <% end %> 
      </h5>
      
      <div class="row mt-3">
        <div class="col-3">
          賞味期限
          <%= render "admin/reviews/rate_read_only.html.erb", review: @review, type: 'expiry_date_rating' %>
        </div>
        <div class="col-3">
          おいしさ
          <%= render "admin/reviews/rate_read_only.html.erb", review: @review, type: 'taste_rating' %>
        </div>
        <div class="col-3">
          おつまみ
          <%= render "admin/reviews/rate_read_only.html.erb", review: @review, type: 'snack_rating' %>
        </div>
        <div class="col-3">
          アウトドア
          <%= render "admin/reviews/rate_read_only.html.erb", review: @review, type: 'outdoor_rating' %>
        </div>
      </div>
    </div>
    
  </div>

  <div class="row mt-5">
    <h5 class="col-12 text-center">
      コメント一覧（コメント数： <%= @review.comments.count %>）
    </h5>
  </div>

  <div class="row my-3 justify-content-center">
    <div class="col-12">
      <table class="table table-bordered table-striped table-hover">
        <thead class="text-center">
          <th>投稿者</th>
          <th>画像</th>
          <th>コメント内容</th>
          <th></th>
        </thead>
        <tbody>
          <% @comments.each do |comment| %>
            <tr>
              <td class="col-2 text-center">
                <%= link_to admin_member_path(comment.member) do %>
                  <%= image_tag comment.member.get_profile_image(50,50), class: "image" %><br>
                  <%= comment.member.nickname %>
                <% end %>
              </td>
              <td class="col-2 text-center">
                <% if comment.image.attached? %>
                  <%= image_tag comment.get_image(100,100), class: "image" %>
                <% end %>
              </td>
              <td class="col-6 text-break">
                <%=safe_join(comment.content.split("\n"),tag(:br))%>
              </td>
              <td class="col-2 text-center">
                <%= link_to "削除", review_comment_path(@review, comment), method: :delete, class: "btn btn-sm btn-danger float-end px-3" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
  
  <div class="row">
    <div class="mx-auto my-2">
      <%= paginate @comments %>
    </div>
  </div>
</div>